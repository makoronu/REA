# REA ロードマップ

## ビジョン

**日本一の不動産情報システムを目指す**

- マルチテナント対応（他社への販売を前提）
- ホームズ/SUUMO/athome等の複数ポータル連携
- メタデータ駆動による拡張性と保守性の両立

---

## 現在の状態

**最終更新**: 2025-12-10
**現在フェーズ**: フェーズ2（機能拡充）

---

## フェーズ1: 基盤構築 ✅ 完了

### インフラ
- [x] GitHub Codespaces移行（2025年9月11日〜10月13日）
- [x] Docker環境構築（PostgreSQL:5433, Redis:6379）
- [x] 環境変数の整理（20+ファイルでハードコードパス除去）
- [x] Claude Code移行（2025年12月10日）

### DB最適化
- [x] モノリシック構造から分散構造へ移行
  - Before: propertiesテーブル 294カラム
  - After: 5テーブル、44コアカラム（85%削減）
- [x] column_labelsテーブル構築（143カラム定義）
- [x] マスターデータテーブル整備（9テーブル）

### メタデータ駆動実証
- [x] 設備管理機能（amenitiesテーブル）
  - 14個のbooleanカラム追加
  - バックエンド0行、フロントエンド0行の変更で完全動作
  - 日本語ラベル自動生成確認

### UI
- [x] 5タブ構成完成
  - 基本情報 / 土地情報 / 建物情報 / 設備・アメニティ / 画像

---

## フェーズ2: 機能拡充 🔄 進行中

### マスターデータシステム ✅ 完了（2025-12-10）
- [x] マルチテナント対応マスターテーブル設計
  - master_categories（45カテゴリ）
  - master_options（267選択肢）
  - company_master_settings（会社別カスタマイズ）
  - portal_mappings（ポータル連携用）
- [x] ホームズCSV仕様書v4.3.2からENUM抽出・登録
  - 物件種別（63件）、建物構造（12件）、用途地域（14件）等
- [x] 将来の拡張性確保
  - SUUMO/athome追加対応可能
  - 会社別マスター設定可能

### ENUM値拡張 ✅ 完了
- [x] property_type の選択肢追加（63種類）
- [x] 各種ステータスENUMの整備（45カテゴリ）
- [ ] バリデーション強化

### フロントエンド改善
- [x] フォームのUX改善（入力欄を日本人向けに太く）
- [ ] エラーハンドリング強化
- [ ] レスポンシブ対応確認

### API開発
- [x] Properties CRUD基本実装
- [ ] 検索・フィルタリング強化
- [ ] ページネーション
- [ ] マスターデータAPI追加

### 設備管理テスト
- [ ] 保存機能の動作確認
- [ ] バリデーションテスト

---

## フェーズ3: マルチテナント化

### 会社管理
- [ ] companiesテーブル作成
- [ ] 会社別認証・認可
- [ ] 会社別マスター設定UI

### ポータル連携
- [ ] ホームズCSV出力機能
- [ ] SUUMO連携対応
- [ ] athome連携対応
- [ ] portal_mappingsを使ったコード変換

### データ連携
- [ ] CSV/Excelインポート
- [ ] 既存データ移行ツール

---

## フェーズ4: 本番準備

### テスト
- [ ] ユニットテスト
- [ ] E2Eテスト
- [ ] パフォーマンステスト

### デプロイ
- [ ] 本番環境構築
- [ ] CI/CD設定
- [ ] 監視設定

---

## フェーズ5: 他社販売

### SaaS化
- [ ] サブスクリプション課金
- [ ] プラン別機能制限
- [ ] オンボーディングフロー

### 営業・サポート
- [ ] デモ環境
- [ ] ドキュメント整備
- [ ] サポート体制構築

---

## 技術的負債・メモ

- Tailwindのレスポンシブが効かない箇所あり → インラインstyleで対応中
- 実データ未投入（マスターデータのみ）
- テストコード未整備

---

## コードベース統計（2025年12月時点）

| 指標 | 数値 |
|------|------|
| 総ファイル数 | 212 |
| 総行数 | 13,371 |
| 総関数数 | 372 |
| 総クラス数 | 58 |

### マスターデータ統計

| テーブル | 件数 |
|---------|------|
| master_categories | 45 |
| master_options | 267 |
| column_labels | 143 |
