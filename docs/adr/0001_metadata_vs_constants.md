# ADR-0001: メタデータ駆動と定数ファイルの使い分け

## ステータス

承認済み

## 日付

2026-01-04

## コンテキスト

プロトコルに以下の原則が存在し、コンフリクトが発生した。

| Tenet | 内容 | 方向性 |
|-------|------|--------|
| 2 | シンプルさ > 柔軟性 | 定数ファイル |
| 6 | メタデータ駆動 | DB化 |

Seg4（エラーメッセージ・placeholder・日付フォーマット）の
ハードコーディング撲滅において、どちらを適用すべきか判断が必要になった。

## 決定

以下の基準で判断する。

### DB化（メタデータ駆動）すべき

- 運用者（非開発者）が管理画面から変更したい
- 運用中に頻繁に変更される（月1回以上）
- 区分値・選択肢・ステータス

### 定数ファイルで十分

- 開発者のみが変更する
- 変更頻度が年1回以下
- 変更時にテスト・デプロイが必要

## Seg4への適用結果

| 項目 | 誰が変更？ | 頻度 | 判定 |
|------|-----------|------|------|
| エラーメッセージ | 開発者 | 低 | 定数ファイル |
| placeholder（動的フィールド） | 運用者 | 中 | DB（column_labels） |
| placeholder（固定フィールド） | 開発者 | 低 | 定数ファイル |
| 日付フォーマット | 開発者 | 低 | 定数ファイル |

## 結果

- エラーメッセージ: `errors.py` に一元管理
- placeholder（動的）: `column_labels.placeholder` カラム追加
- placeholder（固定）: 定数で管理
- 日付フォーマット: `dateFormat.ts` / `date_format.py` に統一

## 備考

定数ファイルによる一元管理も「ハードコーディング禁止」を満たす。
プロトコル§4で「定数クラスまたは設定ファイルで定義」が正しいアプローチと明記されている。

## 対象外（ハードコーディングではない）

| 項目 | 理由 |
|------|------|
| 外部ソースとのマッピング（rea_1↔1） | 変換ロジックは正当な処理 |
| API層の型変換 | DB型を変えずにAPI層で吸収 |

**注意:** マッピングをハードコーディングと誤認してDB型を変更してはならない。
→ 関連インシデント: 2026-01-04_land_info_type_change.md
