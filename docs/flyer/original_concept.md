# REA チラシ・マイソク自動生成システム（概念設計）

## 目的

REAの物件データから**チラシ**と**マイソク**を自動生成し、印刷入稿可能な形式で出力する。

---

## チラシ vs マイソク

| 項目 | チラシ | マイソク |
|------|--------|----------|
| 目的 | 集客・訴求 | 詳細情報提供 |
| 対象 | エンドユーザー | 不動産業者・購入検討者 |
| デザイン | 写真大きめ、視覚重視 | 情報網羅、業界標準フォーマット |
| 用途 | ポスティング、店頭 | 業者間共有、内見時配布 |

---

## 処理フロー

```
REA DB → Python → SVG → 印刷屋（イラレ調整）→ 入稿
```

---

## データソース

REAの既存テーブルをそのまま活用：

- **properties**：物件基本情報（価格、所在地、取引態様）
- **land_info**：土地情報（面積、用途地域、接道）
- **building_info**：建物情報（構造、築年、間取り）
- **amenities**：設備情報（水道、ガス、排水）
- **property_images**：物件写真
- **column_labels**：日本語ラベル（メタデータ駆動）

---

## レイアウトパターン

### チラシ

| 物件数 | レイアウト | 用途 |
|--------|------------|------|
| 1件 | A4全面 | 高額・注目物件 |
| 2件 | 上下/左右分割 | 比較掲載 |
| 4件 | グリッド | 新着まとめ |
| 5件以上 | 一覧形式 | 物件リスト |

### マイソク

| 物件種別 | 特徴 |
|----------|------|
| 土地 | 地形図重視、接道詳細 |
| 戸建 | 間取り図大、設備一覧 |
| マンション | 共用部情報、管理費詳細 |
| 収益物件 | 利回り、レントロール |

---

## 自動判断ロジック

- **property_type** → マイソクテンプレート自動選択
- **物件数・価格** → チラシレイアウト自動選択
- **column_labels** → 日本語ラベル自動取得（メタデータ駆動）

---

## 出力仕様

| 項目 | 仕様 |
|------|------|
| 形式 | SVG（Illustrator編集可能） |
| 色 | CMYK値指定 |
| 塗り足し | 3mm |
| 解像度 | 350dpi相当 |
| フォント | Noto Sans JP（指定のみ、アウトライン化は印刷屋） |

---

## ユーティリティ機能

| 機能 | 内容 |
|------|------|
| 面積変換 | ㎡→坪変換・併記 |
| 築年数 | 自動計算（和暦対応） |
| 価格表示 | 万円/億円フォーマット |
| 坪単価 | 自動計算 |
| 接道状況 | 方位・幅員フォーマット |

---

## 開発フェーズ

| Phase | 内容 | 備考 |
|-------|------|------|
| 1 | 基盤構築 | データマッピング、設定ファイル |
| 2 | マイソク | 土地→戸建→マンション | 業務即活用 |
| 3 | チラシ1件用 | 基本テンプレート |
| 4 | チラシ複数 | 2件/4件/一覧 |
| 5 | UI連携 | rea-adminにボタン追加 |

---

## 拡張アイデア

### 短期

- AIキャッチコピー生成（Claude APIで物件特徴から自動生成）
- QRコード埋め込み（物件詳細ページへのリンク）
- PDF直接出力（SVG経由せず）

### 中期

- テンプレートカスタマイズUI（管理画面からレイアウト調整）
- バッチ生成（新着物件の夜間自動生成）
- 履歴管理（生成済みドキュメントのバージョン管理）

### 長期

- REINS/HOMES連携（ポータル用画像として直接アップロード）
- 多言語対応（英語/中国語版マイソク）
- A/Bテスト対応（複数デザインパターンの効果測定）

---

## 技術選定

| 項目 | 技術 | 理由 |
|------|------|------|
| データ取得 | shared/database.py | REA既存インフラ活用 |
| メタデータ | column_labels | メタデータ駆動継続 |
| 出力形式 | SVG | イラレ編集可能、無料 |
| 画像処理 | Pillow | 350dpi化 |
| AI連携 | Claude API | キャッチコピー生成（オプション） |

---

## 次のアクション

1. REAテーブル構造の最終確認（特にproperty_images）
2. Phase 2：マイソク土地用テンプレート試作
3. 実務テスト→フィードバック→改善