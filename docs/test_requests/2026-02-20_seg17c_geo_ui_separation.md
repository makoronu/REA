# テスト依頼書: Seg 17c Geo UI分離

## 概要
学区・電車/鉄道・バス・周辺施設の4セクションをDynamicFormから独立したモーダル（GeoPanel）に分離。
所在地タブに「周辺情報を管理」ボタンを配置し、クリックでGeoPanelモーダルを開く。

## 変更内容

### 新規ファイル
- `rea-admin/src/components/form/GeoPanel.tsx`: Geo情報管理モーダル（1277行）
  - SchoolDistrictAutoFetchButton（学区自動取得）
  - StationAutoFetchButton（駅自動取得）
  - BusStopAutoFetchButton（バス停自動取得）
  - FacilityAutoFetchButton（周辺施設自動取得）
  - GeoSectionCard, GeoManagementModal（共通UI）

### 変更ファイル（コミット: 2464f5a）
- `DynamicForm.tsx`: Geoコード1150行削除（2325→1207行）、GeoPanel統合
- `constants.ts`: TAB_GROUPS.location→['所在地']、GEO_GROUPS定数追加

## テスト手順

### 1. 所在地タブの表示確認
- [ ] 物件編集画面を開く
- [ ] 所在地タブに「周辺情報を管理（学区・駅・バス・施設）」ボタンが表示される
- [ ] 所在地タブには住所フィールドのみ表示（学区・駅・バス・施設は非表示）
- [ ] タブラベルが「所在地」になっている（旧「所在地・周辺情報」ではない）

### 2. GeoPanelモーダルの動作
- [ ] 「周辺情報を管理」ボタンをクリック → モーダルが開く
- [ ] モーダル内に4セクション表示: 学区、電車・鉄道、バス、周辺施設
- [ ] ×ボタンでモーダルが閉じる
- [ ] 「閉じる」ボタンでモーダルが閉じる
- [ ] モーダル外（オーバーレイ）クリックでモーダルが閉じる

### 3. 学区セクション
- [ ] 「学区を自動取得」ボタンが表示される
- [ ] ボタンクリックで学区候補が取得される（住所設定済みの場合）
- [ ] 学区フィールド（FieldGroup）が表示される

### 4. 電車・鉄道セクション
- [ ] 駅情報のコンパクトカード表示
- [ ] 「管理」ボタンからモーダルで駅の追加・削除が可能
- [ ] 「最寄駅なし」チェックボックスが機能する

### 5. バスセクション
- [ ] バス停情報のコンパクトカード表示
- [ ] 「管理」ボタンからモーダルでバス停の追加・削除が可能
- [ ] 「バス停なし」チェックボックスが機能する

### 6. 周辺施設セクション
- [ ] 施設情報のコンパクトカード表示
- [ ] 「管理」ボタンからモーダルで施設の追加・削除が可能

### 7. データ保存の確認
- [ ] GeoPanelで変更した内容がフォームに反映される
- [ ] 保存ボタンクリックでGeo情報が正常に保存される
- [ ] モーダルを閉じた後も変更が保持される

### 8. 他のタブへの影響なし
- [ ] 基本情報タブ: 正常に表示される
- [ ] 価格・取引タブ: 正常に表示される
- [ ] 管理・費用タブ: 正常に表示される
- [ ] 土地情報/建物情報/設備タブ: 正常に表示される
- [ ] 法令制限タブ: 正常に表示される

### 9. 新規物件作成
- [ ] /properties/new/edit を開く
- [ ] 所在地タブに「周辺情報を管理」ボタンが表示される
- [ ] 物件名入力 → 保存 → 正常に作成できる

## 確認ポイント
- Geoセクションが通常のタブから完全に消えていること
- GeoPanel内でのデータ変更がフォームと同期していること（useFormContext使用）
- 既存の物件データが壊れていないこと
