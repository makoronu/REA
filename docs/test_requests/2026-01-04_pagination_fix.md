# テスト依頼書: ページネーション修正

**作成日**: 2026-01-04
**コミット**: 91e294b
**担当**: Claude

---

## 概要

物件一覧APIに総件数（total）返却機能を追加し、ページネーションが正常に動作するよう修正。

---

## 変更ファイル

| ファイル | 変更内容 |
|---------|---------|
| `rea-api/app/crud/generic.py` | `get_count` メソッド追加 |
| `rea-api/app/api/api_v1/endpoints/properties.py` | レスポンス形式変更（{items, total}） |

---

## テスト環境

- ローカル: http://localhost:5173
- API: http://localhost:8005

---

## テストケース

### 1. 物件一覧ページ（/properties）

| # | 操作 | 期待結果 |
|---|------|---------|
| 1-1 | 物件一覧を開く（20件以上ある場合） | 「全 X 件中 1 - 20 件」と正しい総件数が表示される |
| 1-2 | 「次へ」ボタンをクリック | 2ページ目に移動、「21 - 40 件」と表示される |
| 1-3 | 「最後」ボタンをクリック | 最終ページに移動 |
| 1-4 | 「最初」ボタンをクリック | 1ページ目に戻る |
| 1-5 | 表示件数を「50件」に変更 | 50件表示、総ページ数が更新される |

### 2. フィルター時のページネーション

| # | 操作 | 期待結果 |
|---|------|---------|
| 2-1 | 販売ステータスで「販売中」を選択 | フィルター後の総件数が表示される |
| 2-2 | 検索ボックスに文字入力 | 検索結果の総件数が表示される |
| 2-3 | 価格フィルターを設定 | フィルター後の総件数が表示される |

---

## 確認コマンド

```bash
# APIレスポンス確認
curl -s "http://localhost:8005/api/v1/properties/?limit=5" \
  -H "Cookie: session=..." | jq '{total: .total, count: (.items | length)}'

# 期待結果例
{
  "total": 25,   # 総件数
  "count": 5     # 現在ページの件数
}
```

---

## 合格基準

- [ ] 物件一覧で正しい総件数が表示される
- [ ] ページ移動が正常に動作する
- [ ] フィルター時も正しい総件数が表示される
- [ ] 検索時も正しい総件数が表示される

---

## 注意点

- フロント側は変更なし（既に両形式対応済み）
- API側のみの修正
