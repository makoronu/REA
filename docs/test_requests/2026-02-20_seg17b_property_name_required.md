# テスト依頼書: Seg 17b 新規物件作成バグ修正

## 概要
新規物件作成時に「property_name is required」エラーが発生するバグを修正。
エラーメッセージ日本語化 + フロントエンド必須バリデーション追加。

## 変更内容

### バックエンド（コミット: 1cd4a79）
- `properties.py`: エラーメッセージ "property_name is required" → "物件名は必須です"

### フロントエンド（コミット: 1cd4a79）
- `useMetadataForm.ts`: createZodSchemaでis_required+テキスト型フィールドにZodバリデーション追加
  - メタデータ駆動（is_requiredフラグ + label_jaでエラーメッセージ生成）
  - z.preprocess + z.string().min(1) で空文字/null/undefinedを検出

## テスト手順

### 1. 新規物件作成 — 物件名なしで保存
- [ ] /properties/new/edit を開く
- [ ] 物件名を空のまま保存ボタンをクリック
- [ ] ErrorBannerに「物件名は必須です」が表示される（alert()ではない）
- [ ] API呼び出し前にフロントエンドで検出されること（Networkタブで確認可能）

### 2. 新規物件作成 — 物件名入力後の保存
- [ ] 物件名に値を入力して保存
- [ ] 正常に保存できること（バリデーションエラーが出ないこと）

### 3. 既存物件編集
- [ ] 既存物件の編集画面を開く
- [ ] 物件名が表示されていること
- [ ] 他のフィールドを変更して保存できること
- [ ] 物件名を空にして保存 → バリデーションエラーが表示されること

### 4. 必須テキストフィールド全般
- [ ] 物件名以外の必須テキストフィールドにも赤い * マークが表示されていること
- [ ] 必須テキストフィールドを空にして保存 → フロントバリデーションでエラーが出ること
- [ ] 必須ではないフィールドは空のままでも保存できること

### 5. バックエンドエラーメッセージ（API直接テスト）
- [ ] APIに直接property_name無しでPOST → "物件名は必須です" が返ること（英語ではない）

## 確認ポイント
- フロントエンドバリデーションがAPI呼び出し前に動作すること
- エラーメッセージが日本語であること
- 既存の物件編集機能が壊れていないこと
